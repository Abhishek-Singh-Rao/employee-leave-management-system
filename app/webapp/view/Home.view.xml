<mvc:View
    controllerName="com.company.leavemanagement.controller.Home"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.ui.layout"
    xmlns:f="sap.f"
    xmlns:card="sap.f.cards"
    displayBlock="true">

<Page class="dashboardPage"
      showHeader="true"
      enableScrolling="true"
      backgroundDesign="Solid"
      title="Employee Leave Management System">
    
    <!-- Custom Header with Professional Styling -->
    <customHeader>
        <Bar class="customHeaderBar">
            <contentLeft>
                <HBox alignItems="Center" class="headerLeft" height="100%">
                    <core:Icon 
                        src="sap-icon://business-objects-experience" 
                        size="2.5rem" 
                        color="#ffffff"
                        class="headerLogo sapUiSmallMarginEnd"/>
                    <VBox class="headerTextContainer" justifyContent="Center">
                        <Title text="Employee Leave Management System" level="H2" class="headerTitle"/>
                    </VBox>
                </HBox>
            </contentLeft>
            <contentRight>
                <HBox alignItems="Center" class="headerRight">
                    <Label text="{local>/currentDate}" class="dateLabel sapUiSmallMarginEnd"/>
                    <Button 
                        icon="sap-icon://sys-monitor" 
                        type="Transparent"
                        tooltip="System Health"
                        press="onShowSystemHealth"
                        class="headerButton"/>
                    <Button 
                        icon="sap-icon://refresh" 
                        type="Transparent"
                        tooltip="Refresh Dashboard"
                        press="onRefreshStats"
                        class="headerButton"/>
                    <Button 
                        icon="sap-icon://bell" 
                        type="Transparent"
                        tooltip="Notifications"
                        press="onShowNotifications"
                        class="headerButton notificationButton">
                        <customData>
                            <core:CustomData key="badge" value="3" />
                        </customData>
                    </Button>
                    <Button 
                        icon="sap-icon://sys-help" 
                        type="Transparent"
                        tooltip="Getting Started Guide"
                        press="onShowGettingStarted"
                        class="headerButton"/>
                    <Button 
                        icon="sap-icon://action-settings" 
                        type="Transparent"
                        tooltip="Settings"
                        class="headerButton"/>
                </HBox>
            </contentRight>
        </Bar>
    </customHeader>

        <content>
            <VBox class="mainContainer">
                
                <!-- Compact Welcome Section -->
                <f:Card class="welcomeCardCompact">
                    <f:content>
                        <HBox justifyContent="SpaceBetween" alignItems="Center" class="welcomeContentCompact">
                            <HBox alignItems="Center" class="welcomeLeftSection">
                                <Avatar 
                                    src="sap-icon://hello-world" 
                                    displaySize="M" 
                                    backgroundColor="Accent1"
                                    class="welcomeAvatarCompact"/>
                                <VBox class="welcomeTextCompact">
                                    <Title text="Welcome Back!" level="H3" class="welcomeCompactTitle"/>
                                    <Text text="Monitor and manage leave requests efficiently" class="welcomeCompactDescription"/>
                                </VBox>
                            </HBox>
                        </HBox>
                    </f:content>
                </f:Card>

                <!-- Statistics Cards - Uniform Grid -->
                <layout:Grid defaultSpan="XL3 L3 M6 S12" class="statsGrid">
                    
                    <!-- Total Employees Card -->
                    <f:Card class="statsCard blueStatsCard">
                        <f:content>
                            <VBox class="statsContent">
                                <HBox justifyContent="SpaceBetween" alignItems="Start" class="statsHeader">
                                    <VBox>
                                        <Label text="TOTAL EMPLOYEES" class="statsLabel"/>
                                        <HBox alignItems="End" class="sapUiTinyMarginTop">
                                            <Title text="{local>/stats/employeeCount}" level="H1" class="statsNumber"/>
                                            <Text text="active" class="statsUnit"/>
                                        </HBox>
                                    </VBox>
                                    <Avatar 
                                        src="sap-icon://employee" 
                                        displaySize="L" 
                                        backgroundColor="Transparent"
                                        class="statsIconAvatar blueIcon"/>
                                </HBox>
                                <ProgressIndicator 
                                    percentValue="100" 
                                    displayValue=""
                                    state="None"
                                    showValue="false"
                                    width="100%"
                                    class="statsProgress blueProgress"/>
                                <BusyIndicator visible="{local>/stats/isLoading}" size="1rem" class="sapUiTinyMarginTop"/>
                            </VBox>
                        </f:content>
                    </f:Card>

                    <!-- Pending Requests Card -->
                    <f:Card class="statsCard orangeStatsCard">
                        <f:content>
                            <VBox class="statsContent">
                                <HBox justifyContent="SpaceBetween" alignItems="Start" class="statsHeader">
                                    <VBox>
                                        <Label text="PENDING REQUESTS" class="statsLabel"/>
                                        <HBox alignItems="End" class="sapUiTinyMarginTop">
                                            <Title text="{local>/stats/pendingRequests}" level="H1" class="statsNumber"/>
                                            <Text text="awaiting" class="statsUnit"/>
                                        </HBox>
                                    </VBox>
                                    <Avatar 
                                        src="sap-icon://pending" 
                                        displaySize="L" 
                                        backgroundColor="Transparent"
                                        class="statsIconAvatar orangeIcon"/>
                                </HBox>
                                <ProgressIndicator 
                                    percentValue="100" 
                                    displayValue=""
                                    state="Warning"
                                    showValue="false"
                                    width="100%"
                                    class="statsProgress orangeProgress"/>
                                <BusyIndicator visible="{local>/stats/isLoading}" size="1rem" class="sapUiTinyMarginTop"/>
                            </VBox>
                        </f:content>
                    </f:Card>

                    <!-- Approved Today Card -->
                    <f:Card class="statsCard greenStatsCard">
                        <f:content>
                            <VBox class="statsContent">
                                <HBox justifyContent="SpaceBetween" alignItems="Start" class="statsHeader">
                                    <VBox>
                                        <Label text="APPROVED TODAY" class="statsLabel"/>
                                        <HBox alignItems="End" class="sapUiTinyMarginTop">
                                            <Title text="{local>/stats/approvedToday}" level="H1" class="statsNumber"/>
                                            <Text text="requests" class="statsUnit"/>
                                        </HBox>
                                    </VBox>
                                    <Avatar 
                                        src="sap-icon://accept" 
                                        displaySize="L" 
                                        backgroundColor="Transparent"
                                        class="statsIconAvatar greenIcon"/>
                                </HBox>
                                <ProgressIndicator 
                                    percentValue="100" 
                                    displayValue=""
                                    state="Success"
                                    showValue="false"
                                    width="100%"
                                    class="statsProgress greenProgress"/>
                                <BusyIndicator visible="{local>/stats/isLoading}" size="1rem" class="sapUiTinyMarginTop"/>
                            </VBox>
                        </f:content>
                    </f:Card>

                    <!-- System Status Card -->
                    <f:Card class="statsCard purpleStatsCard">
                        <f:content>
                            <VBox class="statsContent">
                                <HBox justifyContent="SpaceBetween" alignItems="Start" class="statsHeader">
                                    <VBox>
                                        <Label text="SYSTEM STATUS" class="statsLabel"/>
                                        <HBox alignItems="End" class="sapUiTinyMarginTop">
                                            <Title text="100%" level="H1" class="statsNumber"/>
                                            <Text text="uptime" class="statsUnit"/>
                                        </HBox>
                                    </VBox>
                                    <Avatar 
                                        src="sap-icon://monitor-payments" 
                                        displaySize="L" 
                                        backgroundColor="Transparent"
                                        class="statsIconAvatar purpleIcon"/>
                                </HBox>
                                <ProgressIndicator 
                                    percentValue="100" 
                                    displayValue=""
                                    state="Success"
                                    showValue="false"
                                    width="100%"
                                    class="statsProgress purpleProgress"/>
                                <HBox alignItems="Center" class="systemStatus">
                                    <core:Icon src="sap-icon://status-positive" size="0.75rem" color="#28a745" class="pulseIcon sapUiTinyMarginEnd"/>
                                    <ObjectStatus text="All Systems Online" state="Success"/>
                                </HBox>
                            </VBox>
                        </f:content>
                    </f:Card>

                </layout:Grid>

                <!-- Available Services - Uniform Tile Grid -->
                <f:Card class="servicesCard">
                    <f:header>
                        <card:Header
                            iconSrc="sap-icon://grid"
                            title="Available Services"
                            subtitle="Explore all system modules"/>
                    </f:header>
                    <f:content>
                        <layout:Grid defaultSpan="XL2 L2 M4 S6" class="servicesGrid">
                            
                            <!-- Employee Tile -->
                            <VBox class="serviceTileWrapper">
                                <GenericTile 
                                    header="Employees"
                                    subheader="Master Data"
                                    press="onServicePress"
                                    class="uniformServiceTile tileBlue">
                                    <TileContent>
                                        <VBox alignItems="Center" justifyContent="Center" class="tileIconContainer">
                                            <Avatar 
                                                src="sap-icon://employee" 
                                                displaySize="XL" 
                                                backgroundColor="Transparent"
                                                class="tileIcon"/>
                                        </VBox>
                                    </TileContent>
                                    <customData>
                                        <core:CustomData key="route" value="employeeList" />
                                        <core:CustomData key="available" value="true" />
                                    </customData>
                                </GenericTile>
                            </VBox>

                            <!-- Leave Requests Tile -->
                            <VBox class="serviceTileWrapper">
                                <GenericTile 
                                    header="Requests"
                                    subheader="Track Leaves"
                                    press="onServicePress"
                                    class="uniformServiceTile tileOrange">
                                    <TileContent>
                                        <VBox alignItems="Center" justifyContent="Center" class="tileIconContainer">
                                            <Avatar 
                                                src="sap-icon://request" 
                                                displaySize="XL" 
                                                backgroundColor="Transparent"
                                                class="tileIcon"/>
                                        </VBox>
                                    </TileContent>
                                    <customData>
                                        <core:CustomData key="route" value="leaveRequests" />
                                        <core:CustomData key="available" value="true" />
                                    </customData>
                                </GenericTile>
                            </VBox>

                            <!-- Leave Types Tile -->
                            <VBox class="serviceTileWrapper">
                                <GenericTile 
                                    header="Leave Types"
                                    subheader="Categories"
                                    press="onServicePress"
                                    class="uniformServiceTile tileGreen">
                                    <TileContent>
                                        <VBox alignItems="Center" justifyContent="Center" class="tileIconContainer">
                                            <Avatar 
                                                src="sap-icon://list" 
                                                displaySize="XL" 
                                                backgroundColor="Transparent"
                                                class="tileIcon"/>
                                        </VBox>
                                    </TileContent>
                                    <customData>
                                        <core:CustomData key="route" value="leaveTypes" />
                                        <core:CustomData key="available" value="true" />
                                    </customData>
                                </GenericTile>
                            </VBox>

                            <!-- Managers Tile -->
                            <VBox class="serviceTileWrapper">
                                <GenericTile 
                                    header="Managers"
                                    subheader="Hierarchy"
                                    press="onServicePress"
                                    class="uniformServiceTile tilePurple">
                                    <TileContent>
                                        <VBox alignItems="Center" justifyContent="Center" class="tileIconContainer">
                                            <Avatar 
                                                src="sap-icon://manager" 
                                                displaySize="XL" 
                                                backgroundColor="Transparent"
                                                class="tileIcon"/>
                                        </VBox>
                                    </TileContent>
                                    <customData>
                                        <core:CustomData key="route" value="managers" />
                                        <core:CustomData key="available" value="true" />
                                    </customData>
                                </GenericTile>
                            </VBox>

                            <!-- Approvals Tile -->
                            <VBox class="serviceTileWrapper">
                                <GenericTile 
                                    header="Approvals"
                                    subheader="Decisions"
                                    press="onServicePress"
                                    class="uniformServiceTile tileTeal">
                                    <TileContent>
                                        <VBox alignItems="Center" justifyContent="Center" class="tileIconContainer">
                                            <Avatar 
                                                src="sap-icon://approve" 
                                                displaySize="XL" 
                                                backgroundColor="Transparent"
                                                class="tileIcon"/>
                                        </VBox>
                                    </TileContent>
                                    <customData>
                                        <core:CustomData key="route" value="approvals" />
                                        <core:CustomData key="available" value="true" />
                                    </customData>
                                </GenericTile>
                            </VBox>

                            <!-- Reports Tile -->
                            <VBox class="serviceTileWrapper">
                                <GenericTile 
                                    header="Reports"
                                    subheader="Analytics"
                                    press="onServicePress"
                                    class="uniformServiceTile tileRed">
                                    <TileContent>
                                        <VBox alignItems="Center" justifyContent="Center" class="tileIconContainer">
                                            <Avatar 
                                                src="sap-icon://bar-chart" 
                                                displaySize="XL" 
                                                backgroundColor="Transparent"
                                                class="tileIcon"/>
                                        </VBox>
                                    </TileContent>
                                    <customData>
                                        <core:CustomData key="route" value="reports" />
                                        <core:CustomData key="available" value="true" />
                                    </customData>
                                </GenericTile>
                            </VBox>
                        </layout:Grid>
                    </f:content>
                </f:Card>

                <!-- Test Results Section (Modal-ready) -->
                <f:Card class="resultsDisplayCard" 
                       visible="{local>/testResults/visible}">
                    <f:header>
                        <card:Header
                            iconSrc="sap-icon://database"
                            title="{local>/testResults/title}"
                            subtitle="Total: {local>/testResults/totalCount} records"/>
                    </f:header>
                    <f:content>
                        <VBox class="resultsContent">
                            <HBox justifyContent="End" class="resultsToolbar">
                                <Button 
                                    icon="sap-icon://decline" 
                                    text="Clear Results"
                                    type="Transparent" 
                                    press="onClearResults"/>
                            </HBox>
                            <List items="{local>/testResults/data}" 
                                  showSeparators="None"
                                  class="resultsList">
                                <CustomListItem class="resultListItem">
                                    <content>
                                        <VBox class="resultItemContent">
                                            <HBox justifyContent="SpaceBetween" alignItems="Center" class="resultItemHeader">
                                                <Title text="Record {local>index}" level="H5" class="recordTitle"/>
                                                <core:Icon src="sap-icon://database" size="1.5rem" color="#0366d6"/>
                                            </HBox>
                                            <Panel backgroundDesign="Transparent" class="codePanel">
                                                <content>
                                                    <FormattedText htmlText="&lt;pre class='codeBlock'&gt;{local>data}&lt;/pre&gt;"/>
                                                </content>
                                            </Panel>
                                        </VBox>
                                    </content>
                                </CustomListItem>
                            </List>
                        </VBox>
                    </f:content>
                </f:Card>

            </VBox>
        </content>
        
        <!-- Professional Footer with Admin Tools -->
        <footer>
            <Toolbar design="Transparent" class="customFooter">
                <Button 
                    text="Data Testing" 
                    type="Transparent"
                    press="onShowDataTesting"
                    class="footerAdminButton"/>
                <ToolbarSpacer/>
                <HBox alignItems="Center" class="footerContent">
                    <core:Icon src="sap-icon://customer" size="1.2rem" color="#586069" class="footerIcon"/>
                    <Text text="Employee Leave Management System v1.0" class="footerMainText"/>
                    <ToolbarSeparator/>
                    <core:Icon src="sap-icon://sap-logo-shape" size="1rem" color="#586069" class="footerIcon"/>
                    <Text text="Powered by SAP CAP Framework" class="footerText"/>
                    <ToolbarSeparator/>
                    <Text text="Â© 2025 All Rights Reserved" class="footerText"/>
                </HBox>
                <ToolbarSpacer/>
            </Toolbar>
        </footer>
    </Page>

</mvc:View>